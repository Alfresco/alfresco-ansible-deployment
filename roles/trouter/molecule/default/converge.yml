---
- name: talk to all hosts just so we can learn about them
  hosts: all
  tasks:
    - name: Classify hosts depending on their OS distribution
      group_by:
        key: "{{ ansible_distribution }}{{ ansible_distribution_major_version }}"

- name: Converge
  hosts: all
  tasks:
    - name: "Include activemq"
      include_role:
        name: "activemq"
    - name: "Include AIO"
      include_role:
        name: "transformers"
    - name: "Include trouter"
      include_role:
        name: "trouter"
