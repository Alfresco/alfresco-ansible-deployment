---
# defaults file for roles/repository
#
acs_environment:
  JAVA_OPTS:
    - -Xms512m
    - -Xmx3g
    - -XX:+DisableExplicitGC
    - -Djava.awt.headless=true
    - -XX:ReservedCodeCacheSize=128m
    - $JAVA_OPTS
  JAVA_TOOL_OPTIONS:
    - $JAVA_TOOL_OPTIONS

repository_nexus_username: null
repository_nexus_password: null

# war downloads
repository_api_explorer_enabled: true
repository_api_explorer_artifact_name: api-explorer
repository_api_explorer_repository: https://artifacts.alfresco.com/nexus/content/groups/public/org/alfresco

repository_api_explorer_version: 23.4.0
repository_api_explorer_archive_url: "{{ repository_api_explorer_repository }}/{{ repository_api_explorer_artifact_name }}/{{ repository_api_explorer_version }}/{{ repository_api_explorer_artifact_name }}-{{ repository_api_explorer_version }}.war"
repository_api_explorer_archive_checksum_url: "sha1:{{ repository_api_explorer_archive_url }}.sha1"
repository_api_explorer_nexus_username: "{{ repository_nexus_username }}"
repository_api_explorer_nexus_password: "{{ repository_nexus_password }}"

repository_extra_war_downloads: []

# CSRF config
csrf:
  enabled: true
  force_headers: []
  urls: "{{ trusted_urls }}"

# CORS config
cors:
  enabled: true
  urls: "{{ trusted_urls }}"
  allowed_methods:
    - DELETE
    - GET
    - HEAD
    - OPTIONS
    - POST
    - PUT
  allowed_headers:
    - Accept
    - Access-Control-Request-Headers
    - Access-Control-Request-Method
    - Authorization
    - Cache-Control
    - Content-Type
    - Origin
    - X-CSRF-Token
    - X-Requested-With
  exposed_headers:
    - Access-Control-Allow-Origin
    - Access-Control-Allow-Credentials
  support.credentials: true
  preflight_maxage: 10

# default_repository_properties: properties to be added to the
# alfresco-global.properties file, e.g: alfresco.authentication.allowGuestLogin
# is disabled by default.
# To add more properties or override existing defaults, use the date structure
# named repository_properties data structure instead of this one.
default_repository_properties:
  deployment:
    method: ANSIBLE
  authentication:
    protection:
      enabled: "true"
      limit: 5
      periodSeconds: 60
  alfresco:
    authentication:
      allowGuestLogin: "false"
  dir:
    root: "{{ content_data_folder }}/content"
    license:
      external: "{{ settings_folder }}/licenses"
raw_properties: []

default_share_properties: {}

utils_repo: []
utils_storage:
  tmpfs: []
cluster_keepoff: false

# Tomcat resource cache size (mainly for Share)
tomcat_resource_cache_size: 20480

# make sure to only ever copy contents not dir
keystore_src: "{{ content_folder }}/keystore/metadata-keystore/"
repo_keystore: {}
repository_monitored_startup_timeout_seconds: 300

# Identity service arguments
repository_identity_url: ''
repository_identity_client_id: alfresco
repository_identity_client_secret: ''
repository_identity_realm: alfresco

repository_jdbc_driver_class: org.postgresql.Driver
repository_jdbc_driver_version: 42.7.3
repository_jdbc_driver_base_url: https://repo.maven.apache.org/maven2/org/postgresql/postgresql
repository_jdbc_driver_url: >-
  {{ '{0}/{1}/postgresql-{1}.jar'.format(repository_jdbc_driver_base_url, repository_jdbc_driver_version) }}
repository_jdbc_driver_checksum: "sha1:{{ repository_jdbc_driver_url }}.sha1"

# Default repository amps to install
repository_amp_googledrive_repo_version: 4.1.0
repository_amp_googledrive_repo_artifact_name: alfresco-googledrive-repo-enterprise
repository_amp_googledrive_repo_repository: https://artifacts.alfresco.com/nexus/content/groups/private/org/alfresco/integrations
repository_amp_googledrive_repo_archive_url: "{{ repository_amp_googledrive_repo_repository }}/{{ repository_amp_googledrive_repo_artifact_name }}/{{ repository_amp_googledrive_repo_version }}/{{ repository_amp_googledrive_repo_artifact_name }}-{{ repository_amp_googledrive_repo_version }}.amp"

repository_amp_googledrive_share_version: 4.1.0
repository_amp_googledrive_share_artifact_name: alfresco-googledrive-share
repository_amp_googledrive_share_repository: https://artifacts.alfresco.com/nexus/content/groups/public/org/alfresco/integrations
repository_amp_googledrive_share_archive_url: "{{ repository_amp_googledrive_share_repository }}/{{ repository_amp_googledrive_share_artifact_name }}/{{ repository_amp_googledrive_share_version }}/{{ repository_amp_googledrive_share_artifact_name }}-{{ repository_amp_googledrive_share_version }}.amp"

repository_amp_device_sync_version: 5.1.0
repository_amp_device_sync_artifact_name: alfresco-device-sync-repo
repository_amp_device_sync_repository: https://artifacts.alfresco.com/nexus/content/groups/private/org/alfresco/services/sync
repository_amp_device_sync_archive_url: "{{ repository_amp_device_sync_repository }}/{{ repository_amp_device_sync_artifact_name }}/{{ repository_amp_device_sync_version }}/{{ repository_amp_device_sync_artifact_name }}-{{ repository_amp_device_sync_version }}.amp"

repository_amp_aos_module_version: 3.2.0
repository_amp_aos_module_artifact_name: alfresco-aos-module
repository_amp_aos_module_repository: https://artifacts.alfresco.com/nexus/content/groups/public/org/alfresco/aos-module
repository_amp_aos_module_archive_url: "{{ repository_amp_aos_module_repository }}/{{ repository_amp_aos_module_artifact_name }}/{{ repository_amp_aos_module_version }}/{{ repository_amp_aos_module_artifact_name }}-{{ repository_amp_aos_module_version }}.amp"

repository_amp_downloads:
  - url: "{{ repository_amp_googledrive_repo_archive_url }}"
    checksum: "sha1:{{ repository_amp_googledrive_repo_archive_url }}.sha1"
    dest: "{{ content_folder }}/amps_repo/{{ repository_amp_googledrive_repo_artifact_name }}.amp"
    url_username: "{{ repository_nexus_username }}"
    url_password: "{{ repository_nexus_password }}"
  - url: "{{ repository_amp_googledrive_share_archive_url }}"
    checksum: "sha1:{{ repository_amp_googledrive_share_archive_url }}.sha1"
    dest: "{{ content_folder }}/amps_share/{{ repository_amp_googledrive_share_artifact_name }}.amp"
    url_username: "{{ repository_nexus_username }}"
    url_password: "{{ repository_nexus_password }}"
  - url: "{{ repository_amp_device_sync_archive_url }}"
    checksum: "sha1:{{ repository_amp_device_sync_archive_url }}.sha1"
    dest: "{{ content_folder }}/amps_repo/{{ repository_amp_device_sync_artifact_name }}.amp"
    url_username: "{{ repository_nexus_username }}"
    url_password: "{{ repository_nexus_password }}"
  - url: "{{ repository_amp_aos_module_archive_url }}"
    checksum: "sha1:{{ repository_amp_aos_module_archive_url }}.sha1"
    dest: "{{ content_folder }}/amps_repo/{{ repository_amp_aos_module_artifact_name }}.amp"
    url_username: "{{ repository_nexus_username }}"
    url_password: "{{ repository_nexus_password }}"

# additional list of amp downloads
repository_extra_amp_downloads: []
