---
os: linux
dist: xenial
language: python
python:
  - "3.9.0"

services:
  - docker

branches:
  only:
    - master
    - contribs
    - /feature.*/
    - /fix.*/
    - /OPSEXP-.*/

before_install:
  - pip install ansible==${ANSIBLE_VERSION}

env:
  global:
    - MOLECULE_NO_LOG=false
    - ANSIBLE_VERSION="2.9.21"

stages:
  - name: Verification

jobs:
  include:
    - stage: Verification
      name: Localhost integration checks (ACS 6.2.2 on CentOS 7)
      before_install:
        - ./scripts/integration/before_install.sh
      script:
        - ./scripts/integration/script.sh
